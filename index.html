<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
  integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
  crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
  integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
   crossorigin="anonymous"></script>

    <title>Sun Pass Toll Calculator</title>
      <meta name="viewport" content="initial-scale=1.0">
    <!--<meta name= "viewport" content="width=device-width, initial-scale=1">-->
    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->



    <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  <!--  <link href="bootstrap.css" rel="stylesheet">
    <link href="bootstrap-switch.css" rel="stylesheet">
    <script src="jquery.js"></script>
    <script src="bootstrap-switch.js"></script>-->
  <!--  <script type="text/javascript" src="res/mobileSchema.json"></script>-->
    <meta charset="utf-8">
    <style>
        /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>


  <!--  <script src="https://www.w3schools.com/lib/w3.js"></script>
    <div id="floating-panel" title="Toll Calculator">
        <div id="floating-panel-Header" title="Trip Calculator">
          <span style="">
              <img src="img/Calculator_Icon.png">
          <!--    <label>Trip Calculator</span>-->
      <!--      <span style="padding-left:3px;font-size:110%;"> Trip Calculator </span>
            </span>
        </div>
        <!-- payments and axle dropdowns -->
    <!--    <span class="container-fluid" title="How do i pay?">
              <span  class="axlepayment spanheader" style="padding-right: 10px;">
                Payment Type
                <a href="#">?</a>
              </span>
        <span class="axlepayment spanheader" title="How many axles in my motor ?">
                Axle Count
                <a href="#">?</a>
        </span>
        <span class="dropdown">
                  <button class="btn btn-default dropdown-toggle curtain-menu-shadow" type="button" data-toggle="dropdown"
                  style="width:25px;height:25px;padding-top:1px;padding-left:3px;border:none">2
                  <span class="caret"></span>
        </button>
        <ul class="dropdown-menu dropdown-menu-axle">
            <li><a href="#">1</a></li>
            <li><a href="#">2</a></li>
            <li><a href="#">3</a></li>
            <li class="divider"></li>
            <li><a href="#">?</a></li>
        </ul>
        </span>
      </span> -->
      <!-- Sunpass and Axle -->
      <!--  <img src="http://104.131.96.12:3001/api/image/sunpass_logo.png">-->
    <!--    <div class="container-fluid">
            <span class="dropdown">
            <button class="btn btn-default dropdown-toggle curtain-menu-shadow" type="button" data-toggle="dropdown">

          <img src="img/SUNPASS_button.png">
            <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li><a href="#">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li class="divider"></li>
                <li><a href="#">?</a></li>
            </ul>
            </span>
            <span>
            <img src="img/2 Axles.png" class="spanpadding" style="padding-left:25px;">
          </span>
        </div> -->

        <!-- Trip calculation  ORIGIN-->
        <!--temp

        $('.selectpicker').on('changed.bs.select', function (e, clickedIndex, newValue, oldValue) {
            var selected = $(e.currentTarget).val();
             loadFacilitiesForRegion(selected,getFacilityurl);
        });







      -->

       <div class="bottom" style="padding-top:10px;"></div>
        <div class="container-fluid">
            <div class="spanheader-trips">
                Trip Start
            </div>
            <div class="dropdown">
            <!--    <button id="btnSelectRegion" class="btn btn-default dropdown-toggle curtain-menu-shadow button-trips-dropdown" type="button" data-toggle="dropdown">-->
                  <button id="btnSelectRegion" class="curtain-menu-shadow button-trips-dropdown" type="button" data-toggle="dropdown">
                    <div text-align = "left">Select Region
                    </div>
                <!--  <span class ="span-content-text">Select Region</span>
                 <span  class="caret .span-content-caret"></span>-->
               </button>
            <!--    <ul class="dropdown-menu">
                    <li><a href="#">Tampa</a></li>
                    <li><a href="#">Miami</a></li>
                    <li><a href="#">Orlando</a></li>
                    <li class="divider"></li>
                    <li><a href="#">?</a></li>
                </ul>-->
            </div>
            <div class="bottom-between-dropdowns"></div>
          <!--  <div class="bottom-between-dropdowns"></div>
            <div class="dropdown" id="srcFacilityDrdn">
                <button id="btnSelectFacility" class="btn btn-default dropdown-toggle curtain-menu-shadow button-trips-dropdown" type="button" data-toggle="dropdown">
            <span>Select Facility</span>
            <span class="caret"></span>
            </button>
                <ul id = "srcFacilityList" class="dropdown-menu button-dropdown-menu-trips">
                    <li><a href="#">Tampa</a></li>
                    <li><a href="#">Miami</a></li>
                    <li><a href="#">Orlando</a></li>
                    <li class="divider"></li>
                    <li><a href="#">?</a></li>
                </ul>
            </div>-->

            <!-- <div class="dropdown" id="srcExitsDrdn">
                  <button id="btnSelectExit" class="btn btn-default dropdown-toggle curtain-menu-shadow button-trips-dropdown" type="button" data-toggle="dropdown">
                    <span>Exit</span>
                    <span class="caret"></span>
                  </button>
                  <ul id ="srcExitList" class="dropdown-menu button-dropdown-menu-trips">
                      <li><a href="#">Tampa</a></li>
                      <li><a href="#">Miami</a></li>
                      <li><a href="#">Orlando</a></li>
                      <li class="divider"></li>
                      <li><a href="#">?</a></li>
                  </ul>
              </div>-->



          <!--  <div class="dropdown">
                <button id="btnSelectFacility" class="btn btn-default dropdown-toggle curtain-menu-shadow button-trips-dropdown" type="button" data-toggle="dropdown">
            <span>Select Facility</span>
          <span class="caret"></span>
        </button>
                <ul class="dropdown-menu">
                    <li><a href="#">Tampa</a></li>
                    <li><a href="#">Miami</a></li>
                    <li><a href="#">Orlando</a></li>
                    <li class="divider"></li>
                    <li><a href="#">?</a></li>
                </ul>
            </div> -->
            <div class="bottom-between-dropdowns"></div>
          <!--  <div class="dropdown">
                <button id="btnSelectExit" class="btn btn-default dropdown-toggle curtain-menu-shadow button-trips-dropdown" type="button" data-toggle="dropdown">
        <span>Exit</span>
        <span class="caret"></span>
      </button>
                <ul class="dropdown-menu">
                    <li><a href="#">Tampa</a></li>
                    <li><a href="#">Miami</a></li>
                    <li><a href="#">Orlando</a></li>
                    <li class="divider"></li>
                    <li><a href="#">?</a></li>
                </ul>
            </div> -->
        </div>

          <!-- Trip calculation  DESTINATION-->
      <!--  <div class="container-fluid">
            <div class="spanheader-trips">
                Trip End
            </div>
            <div class="dropdown">
                <button id="btnSelectRegion" class="btn btn-default dropdown-toggle curtain-menu-shadow button-trips-dropdown" type="button" data-toggle="dropdown">
              <span>Select Region</span>
            <span class="caret"></span>
          </button>
                <ul class="dropdown-menu">
                    <li><a href="#">Tampa</a></li>
                    <li><a href="#">Miami</a></li>
                    <li><a href="#">Orlando</a></li>
                    <li class="divider"></li>
                    <li><a href="#">?</a></li>
                </ul>
            </div>
            <div class="bottom-between-dropdowns"></div>
            <div class="dropdown">
                <button id="btnSelectFacility" class="btn btn-default dropdown-toggle curtain-menu-shadow button-trips-dropdown" type="button" data-toggle="dropdown">
            <span>Select Facility</span>
          <span class="caret"></span>
        </button>
                <ul class="dropdown-menu">
                    <li><a href="#">Tampa</a></li>
                    <li><a href="#">Miami</a></li>
                    <li><a href="#">Orlando</a></li>
                    <li class="divider"></li>
                    <li><a href="#">?</a></li>
                </ul>
            </div>
            <div class="bottom-between-dropdowns"></div>
            <div class="dropdown">
                <button id="btnSelectExit" class="btn btn-default dropdown-toggle curtain-menu-shadow button-trips-dropdown" type="button" data-toggle="dropdown">
        <span>Exit</span>
        <span class="caret"></span>
      </button>
                <ul class="dropdown-menu">
                    <li><a href="#">Tampa</a></li>
                    <li><a href="#">Miami</a></li>
                    <li><a href="#">Orlando</a></li>
                    <li class="divider"></li>
                    <li><a href="#">?</a></li>
                </ul>
            </div>
        </div> -->

        <div class="bottom-between-dropdowns" style="padding-top:0px;"></div>

        <!--Traffic and Reset Maps -->
      <!--  <div class="container-fluid" style="padding-bottom:0px;">
            <span class="row">
                <span class="col-xs-5" style="padding-left:30px;">
          <button id="btnTraffic" type="button" class="SubmitButtonClass submit-button" style="border:none;">
          <img src="img/Traffic Cars.png">
          <value> Traffic </value>
        </button></span>
            <span class="col-xs-6" style="padding-left:62px">
        <button id = "btnReset"type="reset" class="SubmitButtonClass submit-button" style="border:none;">
        <img src="img/Reset Icon.png">
        <value> Reset </value>
      </button></span>
    </div> -->

        <!-- Express Lanes and Time Day selection -->
        <div class="bottom" style="padding-top:0px;padding-bottom:0px"></div>
        <div class="bottom-between-dropdowns" style="padding-bottom:0px; padding-top:3px;"></div>


   <!-- <div class="container-fluid">
            <span> <label style="padding-top:8px;"> Express Lanes Available
            </label>
          </span>
          <span style="padding-left: 20px;">
            <label class="switch" style="position:absolute">
            <input type="checkbox" name="my-checkbox" checked data-toggle="toggle">
            <span class = "slider round"></span>
           </label>
         </span>
           <div class="bottom-between-dropdowns" style="padding-bottom:0px; padding-top:3px;"></div>
         <div>
           <span style="padding:10px"><label> Time</label></span>
           <span class="dropdown">
                     <button class="btn btn-default dropdown-toggle curtain-menu-shadow" type="button" data-toggle="dropdown"
                     style="width:25px;height:22px;padding-top:1px;padding-left:3px;">
                     <span class="caret"></span>
           </button>
           <ul class="dropdown-menu dropdown-menu-axle">
               <li><a href="#">1</a></li>
               <li><a href="#">2</a></li>
               <li><a href="#">3</a></li>
               <li class="divider"></li>
               <li><a href="#">?</a></li>
           </ul>
           </span>
           <span class="dropdown">
                     <button class="btn btn-default dropdown-toggle curtain-menu-shadow" type="button" data-toggle="dropdown"
                     style="width:25px;height:22px;padding-top:1px;padding-left:3px;">
                     <span class="caret"></span>
           </button>
           <ul class="dropdown-menu dropdown-menu-axle">
               <li><a href="#">AM</a></li>
               <li><a href="#">PM</a></li>
               <li class="divider"></li>
               <li><a href="#">?</a></li>
           </ul>
           </span>
           <span style="padding:10px"><label> Day</label></span>
           <span class="dropdown">
                     <button class="btn btn-default dropdown-toggle curtain-menu-shadow" type="button" data-toggle="dropdown"
                     style="width:100px;height:22px;padding-top:1px;padding-left:3px;">
                     <span class="caret"></span>
           </button>
           <ul class="dropdown-menu dropdown-menu-axle">
               <li><a href="#">Sunday</a></li>
               <li><a href="#">Monday</a></li>
               <li><a href="#">Tuesday</a></li>
               <li><a href="#">Wednesday</a></li>
               <li><a href="#">Thursday</a></li>
               <li><a href="#">Friday</a></li>
               <li><a href="#">Saturday</a></li>
               <li class="divider"></li>
               <li><a href="#">?</a></li>
           </ul>
           </span>
         </div>
         <div>
           <p>Express Lane rate is approximation based on available historical data.</p>
         </div>
       </div> -->
          <div class="bottom"></div>

          <!-- Route Detail, Printer and Sunpass -->
    <!--      <div class="containter-fluid">
            <span>
              <label class="spanpadding printer-span-padding">
                Route Detail
                <span class="dropdown">
                          <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown"
                          style="width:25px;height:25px;padding-top:1px;padding-left:3px;border:none">
                          <span class="caret"></span>
                </button>
                <span class="spanpadding printer-span-padding">
                  <button class="btn btn-default submit-button" onClick="window.print()">
                  <img src="img/Printer_Icon.png">
                </button>
                </span>
                <span class="spanpadding printer-span-padding ">
                    <img src="img/SUNPASS_button.png">
                  </span>
              </div> -->
                 <div class="bottom-between-dropdowns" style="padding-bottom:0px; padding-top:3px;"></div>
              <!-- Numbers General Toll and Express toll -->
          <!--   <div class="container-fluid">
               <table>
               <thead>
                   <tr>
                     <th></th>
                     <th></th>
                   </tr>
                 </thead>
                 <tbody>
                   <tr>
                     <td class="sidebar" style="padding-right:0px;width:145px;">
                      <div  style="color:green;text-align:center;"><label>$1.85<label></div>
                      <div style="text-align:center;"> General Toll Trip</div>
                      <div style="text-align:center;"> You saved $0.53 with SunPass!</div>
                        <div style="text-align:center;"> <a href="#">Details</a></div>
                     </td>
                     <td style="text-align:center;padding-left:5px;">
                     <div><label style="color:Orange">$7.50<label></div>
                     <div> Express Lane Toll</div>
                     <div> <a href="#">Details</a></div>
                     </td>
                   </tr>
                 </tbody>
               </table>
             </div> -->
  <!-- </div>
    <!--<h3> My Google Maps Demo</h3>-->

    <div id="map"></div>
    <p>Click on the map to add interchanges </p>
    <script>
    if (window.File && window.FileReader && window.FileList && window.Blob) {
  // Great success! All the File APIs are supported.
} else {
  alert('The File APIs are not fully supported in this browser.');
}
        var b1 = document.getElementById("btnTraffic");
        var b2 = document.getElementById('btnReset');


        b2.onclick = function() {
            //   b2.style.background = "#7ea551";
            //    b2.style.border= "5";
        }

        b1.onclick = function() {
            // b1.style.background = "#b7a15d";
        }
        var locations = [
            ['Title A', 28.41, -81.431, 1],
            ['Title B', 28.42, -81.431, 2],
            ['Title C', 28.43, -81.431, 3],
            ['Title D', 28.44, -81.432, 4]
        ];

      var locationData;

        var icon = {
            url: 'https://upload.wikimedia.org/wikipedia/commons/c/c3/Florida%27s_Turnpike_shield.png'
        };

        function initMap() {
            var orlando = {
                lat: 28.46,
                lng: -81.431
              //  lat: 28.59,
              //  lng: -81.71
            };
            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: orlando,
              //  mapTypeId: 'roadmap'
            });
          /* var script = document.createElement('script');
                script.src = 'https://fltpkprod.gtntechsol.com/ftbrapi/schema/mobileSchema';
                document.getElementsByTagName('head')[0].appendChild(script);*/

                      //////////////////////////////// Legend Code ///////////////////////////
                    /*  var iconBaseUrl = 'img/';

                      var legendIcons = {
                        interchange: {
                          name: 'Interchange',
                          iconL: iconBaseUrl + 'Reset Icon.png'
                        },
                        tollPoint: {
                          name: 'Mainline Toll Point',
                          iconL: iconBaseUrl + 'Traffic Cars.png'
                        },
                        tollLanes: {
                          name: 'Toll Lanes',
                          iconL: iconBaseUrl + 'Printer_Icon.png'
                        },
                        servicePlaza: {
                          name: 'Service Plaza',
                          iconL: iconBaseUrl + 'GasPump_icon.png'
                        },
                      };*/

                      /*    var legend = document.getElementById('legend');
                          for(var key in legendIcons){
                            var type = legendIcons[key];
                            var name = type.name;
                            var iconL = type.iconL;
                            var divlegend = document.createElement('div');
                            divlegend.innerHTML = '<p style="clear:both;">&nbsp&nbsp'+ name + '<img style="" src="' + iconL + '" align="right">&nbsp</p>' ;
                            legend.appendChild(divlegend);
                          }*/

                      ///////////////////Legend Code End////////////////////////////////////////

            var marker = new google.maps.Marker({
                position: orlando,
                map: map
            });

            var getLocationsUrl  = "http://192.168.200.16:9991/exchanges";
            var googleUrl = "http://www.google.com"
            //var getTollPlazasUrl = "http://192.168.200.16:9991/tollPlazas"
//156.75.254.31
            var getTollPlazasUrl = "http://192.168.1.141:9991/tollPlazas"



            axios.get(getTollPlazasUrl)
                  .then(function(response){
                    if(response.status == 200){
                    // console.log(response.data);
                      locationData = JSON.parse(response.data.content);
                      console.log(locationData);
                      goGetRegions(locationData);
                    }
                  })
                  .catch(function(error){
                    console.log(error);
                  });

                  /*    var marker = new google.maps.Marker({
                        position: orlando,
                        map: map
                      });
                      //var getLocationsUrl =  "http://192.168.1.141:9991/exchanges
                      //  var getLocationsUrl = baseURL.concat("exchanges");
                      var googleUrl = "http://www.google.com"
                      //var getTollPlazasUrl = "http://192.168.200.16:9991/tollPlazas"
                      //156.75.254.31
                      var getTollPlazasUrl = baseURL.concat("tollPlazas"); */
                  //  var getRegionsurl = baseURL.concat("regions");


                  /////////////Populating Toll Routes for the given 2 exchanges Test Cases////////////

                  /*  setCoordinates(function(data){
                      addPolyLine(map,data);
                    });*/

              /*    region1selected = "ORLANDO AREA";
                  facility1selected = "Florida's Turnpike - Orlando Area";
                  exit1selected = "Orlando (I-4)";
                  region2selected = "ORLANDO AREA";
                  facility2selected = "Florida's Turnpike - Orlando Area";
                  exit2selected = "I-75";
                  axleCount = 2;



                  sampleData = {
                    "source": {
                      "region": region1selected,
                      "facility": facility1selected,
                      "exit": exit1selected
                    },

                    "destination": {
                      "region": region2selected,
                      "facility": facility2selected,
                      "exit": exit2selected
                    },

                    "axlecount": axleCount
                  };*/

                  //setCoordinates(sampleData,map);

                  //var positionGeoList = [];

        /*    axios.get(getLocationsUrl)
                    .then(function(response){
                    //   locationData = response.data;
                      console.log(response.status);
                      console.log(response.data);
                      locationData = JSON.parse(response.data.content);
                  //  console.log(locationData.length);
                  //  console.log(locationData);

                  addLatLongs(locationData);
                    })
                    .catch(function(error){
                      console.log(error);
                    }); */
      //  console.log(locationData.length);
        //TestMarker();

        }

        //  var tollPath = new google.maps.Polyline({});



        /*    axios.get(getTollPlazasUrl)
              .then(function(response) {
                if (response.status == 200) {
                  // console.log(response.data);
                  locationData = JSON.parse(response.data.content);
                  console.log(locationData);
                  // goGetRegions(locationData);
                }
              })
              .catch(function(error) {
                console.log(error);
              });*/


        /*    axios.get(getLocationsUrl)
                    .then(function(response){
                    //   locationData = response.data;
                      console.log(response.status);
                      console.log(response.data);
                      locationData = JSON.parse(response.data.content);
                  //  console.log(locationData.length);
                  //  console.log(locationData);

                  addLatLongs(locationData);
                    })
                    .catch(function(error){
                      console.log(error);
                    }); */
        //  console.log(locationData.length);
        //TestMarker();

        function goGetRegions(locationData){
          //console.log(locationData);
        for(var key in locationData){
          console.log("for Key:" + key);
          for(var j = 0; j<locationData[key].length; j++){
            console.log(locationData[key][j]);
            console.log(locationData[key][j][0]);
            console.log(locationData[key][j][1]);
          var plazas =  new google.maps.LatLng(locationData[key][j][0],locationData[key][j][1] );
          //  var plazas = locationData[key][j][1];
             addMarker(plazas);
          }
          }

        }

        function addLatLongs(locationData) {
          console.log(locationData.length);
            for (var i = 0; i < locationData.length; i++) {
                var exchanges = new google.maps.LatLng(locationData[i][1], locationData[i][0]);
             //console.log(locationData[i][0]);
             //console.log(locationData[i][1])
                addMarker(exchanges);
            }
        }

        function ActualMarker(){
          console.log(this.responseText);
        }

       function processLocations(fac){
          for(var i =0; i< fac.results.schemaData.routeSections.length; i++){
            for(var j =0; j< fac.results.schemaData.routeSections[i].coordinates.length;j++)
              var coords = fac.results.schemaData.routeSections[i].coordinates[j];
              var latlng = new google.maps.LatLng(coords[1]. coords[0]);
              addMarker(latlng);
          }
        }
//  fillColor: '#B3B337'
        function addMarker(location) {
            marker = new google.maps.Marker({
                position: location,
                map: map,
                icon: {
                    path: google.maps.SymbolPath.CIRCLE,
                    scale: 4,
                    fillOpacity: 1,
                    strokeOpacity: .8,
                    strokeWeight: 1,
                    fillColor: '#f4414a'
                },
            });
        }



        function TestMarker() {
            for (var i = 0; i < locations.length; i++) {
                var centralpark = new google.maps.LatLng(locations[i][1], locations[i][2]);
                addMarker(centralpark);
            }
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDpKvus3VMT0RQuDbJlWXZiZE2k4lQlrI&callback=initMap" async defer></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</body>

</html>
